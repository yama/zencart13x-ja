============================================================

             Zen Cart 1.3.9h（日本語版）bm-ver.3.2

============================================================

Zen Cart(tm) - The Art of E-Commerce
Welcome to Zen Cart(tm) E-Commerce
日本語化とカスタマイズ　有限会社ビッグマウス

当プログラムは多くの方々のサポートをいただきながら、zen-cart.jp で行われた
1.3.0日本語版の内容をベースに利用させていただいて、bigmouse Inc.が
2008年2月に公開した　Zencart 1.3.8a（日本語版）からのバージョンアップと
なっております。

Zencart1.3.9h 英語版を日本語化したのではなく、日本語化済みの 1.3.8a に対して、
1.3.9h までの間に行われた各種のアップデートの中から、日本語版に必要であると
判断したものを組み込んでおります。

そのため、日本語版としては利用する事の無い海外の配送サービスへの修正や、
日本語版にはなじまない修正、また極端にサーバー負荷を上げるようなログの
取得方法など1.3.9h から移植されていなかったり独自仕様に変更している
ものもあります。

※今回のバージョンより、最新バージョンの参照を zen-cart.com ではなく、
　bigmouse.jp サーバーにて管理するよう変更しております。


以下は、バージョン1.3.8a より共通の情報となります。

日本語化に伴い、弊社が考える「使いやすさ」を基準として独自の修正が加えられ
ていますので、その点はご了承ください。

※　日本語ファイルでのすべて文字コードは UTF-8 になっております。
　　言語ファイル修正の際にはご注意ください。

※　商品画像のリサイズ処理が実装されています。
　　（※　Product - Generalのみ適応）
　　リサイズした画像を正しくイメージディレクトリ内に保存するために、
　　images/ ディレクトリ内の　large/ 及び medium/ ディレクトリに書き込み
　　権限を与える必要があります。
　　上記の２ディレクトリについては、パミッションを777などに設定してください。
　　インストーラーでは、images/ ディレクトリのパミッションは確認しますが、
　　それ以下のディレクトリまでは確認しません。



＜日本語化に伴う主な独自修正＞

■　主に管理画面を中心としてタイトルと説明文を見直し、直訳ではなくできるだけ
　　わかりやすい日本語にしました。
　　また、必要に応じて説明文を追加しています。

■　メール送信時にタイトル部分や本文に半角カタカナが含まれると、以降が
　　削除されてしまう問題に対応するため、送信前に半角カタカナはすべて全角
　　に置き換えてから送信するようにしています。
　　※　その他の機種依存文字に関しては対応できていません。

■　管理画面から「ギフト券をメールで送付」するに際して、宛先を既存会員から
　　選択するのではなく、直接メールアドレスを入力して送信する場合にＨＴＭＬ
　　受信設定にしている会員を指定すると、ＨＴＭＬメールの表示に問題が出る
　　バグ？がありましたが、直接メールアドレスを指定した場合はテキストメール
　　の送信に限定する方法で回避しております。

■　開発のしやすさを考えて管理画面の設定項目で key を表示するように
　　デフォルト設定しております。

■　レビュー表示で60バイトで改行される仕様を修正

■　検索キーワードにおいて、全角スペース区切りでの複数単語での and or 
　　検索に対応するように修正

■　MySQLのバージョンをチェックし、4.1.3 以上かどうかで、データベースを
　　utf-8 に切り替えてインストールするようにしています。

■　インストールにおいては、アップデートモードには対応しておりません。

■　注文確定ボタンの多重送信を防止するためのJavaScript に修正を加えました。

■　新着情報センターボックスで、ステータスOFFの商品が表示されているバグを
　　修正。

■　admin/coupon_restrict.phpで<body>を2回出力しているミスを修正。

■　includes/init_includes/overrides/init_sanitaze.php でグルーバル関数の
　　ポインタが最後ににいってしまう仕様を修正

■　ドロップダウンリストを持たない国で登録された県名が住所変更画面で反映
　　されないバグの修正。

■　商品表示に際してカテゴリＩＤを引数に持たない場合カテゴリアイコンのリンク
　　が正しく動作しないバグの修正。

■　ギフト券利用時に合計金額が正しく計算されないバグを修正

■　MySQL5 のjoin に対応していない部分があったため修正


＜独自追加・修正機能＞


■　管理画面のメニュー項目をクリックした際に展開されるメニューリスト画面を
　　項目毎にレイアウトしました。

■　支払モジュール「銀行振込み」にておいて、振込先口座をテキストエリアで
　　入力できるようにし、改行がページ内とメールにおいて反映されるように修正

■　代引き手数料計算
　　手数料計算ができる「代金引換払い」を追加

■　汎用的に配送料金が設定できる「配送料自由設定」ツールを追加
　　ヤマト運輸の配送区域をベースに重量別配送料金表が編集できるようにしました。

■　住所入力に「ふりがな」項目を追加
　　管理画面で言語ごとの設定ができるようにしています。

■　商品オプション属性の管理-画面にてオプション値に対応するオプション名
　　だけが表示されるようにしました。
　　コントリビュートされていたものは javascript が無効の場合は、一切編集が
　　出来なくなるため、javascript が無効な場合は通常の動きになるように
　　オリジナルで制作しました。

■　管理画面内「顧客アカウントの設定」にて「国名ドロップダウンの表示」を
　　表示するかどうかの設定ができるようにしましｔ。
　　非表示にしている場合には、「アカウントのデフォルト国別ＩＤ」の設定内容
　　が適用されます。
　　※　途中でこの設定を変更して国名を非表示にした場合、先に日本（デフォルト）
　　　　以外の国で住所登録しているユーザーは住所変更ができなくなります。
　　　　運用上注意してください。、

上記項目に関連して、1.3.8a の動作として、ドロップダウンで県名がリスト化
されない国を選択した場合、ドロップダウンの下に直接入力枠が表示されるのですが、
JavaScript の制御であるため、JavaScript を無効にしているブラウザでは、
ドロップダウンと入力枠の両方が表示されてしまいます。


■　クロネコ＠ペイメント側がutf-8に対応していない様子であるため、一旦
　　文字コード変換ファイルを経由してShift-JISでアクセスするように致しました。

■　管理画面から商品画像アップロード時にプレビュー段階では画像の上書きを
　　しないように修正しました。（※　Product - Generalのみ適応）

■　サイドボックスの表示設定で、すべてのサイドボックスを一括変更できるよう
　　に変更

■　商品登録ページで既に画像が登録されている時にはその画像を表示するよう
　　に変更

■　管理画面からの商品画像アップロード時に画像のリサイズ機能を追加
　　「一般設定」＞「画像の設定」内の各画像の横幅・高さの設定値を最大値として
　　縦横比を保持した上でリサイズを行い、専用のディレクトリに接尾辞を
　　付与して保存します。
　　
　　・小画像のサイズ指定　「商品画像（小）の横幅」と「商品画像（小）の高さ」
　　　デフォルトの保存先　　images/ 内（アップロード先）
　　・中画像のサイズ指定　「商品情報 - 画像の横幅」と「商品情報 - 画像の高さ」
　　　デフォルトの保存先　　images/medium/ 内
　　・大画像のサイズ指定　リサイズ処理を行わずアップロードされた画像を保存
　　　デフォルトの保存先　　images/large/ 内

　　ディレクトリ構造にも対応しています。
　　画像の「アップロード先ディレクトリ」としてデフォルトの Main Directory
　　以外の特定のディレクトを指定した場合、large/、medium/ 各ディレクトリ内の
　　同名のディレクトリ以下に大画像・中画像を保存します。
　　もし、該当するディレクトリが存在しない場合にはディレクトリを自動生成し
　　画像を保存します。

Tips:
　　各画面における画像の表示サイズを設定する事ができますので、
　　表示される画像の品質を保つためにはリサイズされた画像サイズと同じ
　　値を設定される事をお勧めします。

■　『注文確定』ボタンの連打による注文データの再送信を制御するため、
　　JavaScriptの制御に加えて、ＤＢを利用した制御機能を追加いたしました。
　　管理画面の「ショップ全般の設定」＞「一般設定」にＤＢによる制御を利用
　　するかどうかの設定項目も追加しています。

※ご注意：
　　checkout_confirmation から直接決済サーバーなどに移動するタイプの
　　決済サービスを利用する必要がある際には、False に設定してください。
　　例）ルミーズ

■　顧客アカウントの設定で会社名を有効にして尚且つ最低文字数を設定して
　　いる場合、これまでコメントなしでエラーになっていたため、上記設定の場合
　　会社名を必須項目と表示し、エラーで正しく内容を表示するように致しました。

■　支払い機能として「後払い.com」に標準対応


以下、インストールに関する簡易ガイドです。

このドキュメントはインストールに関する非常に簡易なドキュメントです。
インストールに関するより詳細な情報を得るために、/docsディレクトリにある
HTMLバージョンのドキュメントを参照することをおすすめします。

全てのREADMEドキュメントは/docsディレクトリに保存されています。

--------------------------------------------------------------------------

オンラインドキュメントはこちらから: http://tutorials.zen-cart.com

Zen Cartには自動インストーラーがついています。しかし、このシステムを使うには、
まずコード一式をインストールしたいWebサーバにアップしておく必要があります。

ウェブサーバー自体はローカルのパソコンでも、インターネット上のサーバーでも
構いません。

まずは、ダウンロードした圧縮ファイルを解凍してください。
圧縮ファイルの解凍方法はご利用ＯＳによって様々ですのでふさわしい方法を
ご利用ください。

圧縮が完了したら、Zencart のスクリプトが入ったディレクトリが生成されます。

ＦＴＰなどを使って、このディレクトリ内のすべての内容をウェブサーバーに移動
するかコピーしてください。

では、インストーラーを起動します。
ブラウザを開き以下のＵＲＬをアドレスに入力してください。

もし、ローカルＰＣ内のＷＥＢサーバーをご利用の場合は

   http://localhost/{zen-cart-directory}/zc_install/

もし、インターネット上に公開されているサーバーの場合は

   http://{www.mydomain.com}/zc_install/

を指定します。

あとは、表示される内容に従って、インストールを進めてください。

インストールに関するさらに詳しい資料は、/docs/1.readme_installation.html
を参照なさってください。

★　インストールと初期設定方法に関しては、ビッグマウスの提供する有料の
商用バージョンである　ZenCartPro 用のヘルプサイトを参照していただくと、
多くの情報が共通で利用可能です。

また、セキュリティ等に関する最新情報も常に更新しておりますので、zencart を
利用する全ユーザーは定期的に情報を確認するようお勧めいたします。

インストールガイド：		http://zencart-pro.com/help/node/159
セキュリティについて：		http://zencart-pro.com/help/node/151
管理ディレクトリ名の変更方法：	http://zencart-pro.com/help/node/202

同サイトでは、各種トラブル対応のヒントやカスタマイズに関する情報も得る事が
出来るでしょう。

■更新履歴

2011.06.17  公開版 ver.3.2
	管理画面側でも県名ドロップダウンがコード順に並ぶよう修正
	ヘルプポップアップに残っていた脆弱性への対応

2011.05.25  公開版 ver.3.1
	住所入力時の県名ドロップダウンがコード順に並ぶよう修正

2011.04.07  公開版 ver.3
	MySQLのエラーチェックが厳しくてもエラーにならないようにインストールSQLを見直し
	DB上のZencart/DBのバージョン情報を1.3.9になるよう変更
	Paypalでの戻り地で文字化けが発生する事が有ったのを修正（高橋様ありがとうございます）
	マイページでプライマリの住所を変更した時にTABLE_CUSTOMERSの電話・FAXが更新が掛かっていなかったのを修正


2010.12.09  公開版 ver.2
	管理画面のフォームがべた書きのためにsecurityTokenの値が渡らずフォームのアクションが処理されなかった部分を修正

2010.11.27  公開版 ver.1
